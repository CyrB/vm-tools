

# Add colors to shell
export LS_OPTIONS='--color=auto'
eval "`dircolors`"
alias ls='ls $LS_OPTIONS'

# Aliases
alias ll='ls -al'
alias rm='rm -i'

# Aliases Docker
alias dps='docker ps -a'
alias dim='docker images'
alias drm='docker ps -a|sed "1 d"|awk '"'"'{print $1}'"'"'|xargs docker rm'
alias drmi='docker images|sed "1 d"|grep \<none\>|awk '"'"'{print $3}'"'"'|sort|uniq|xargs docker rmi'
alias dstop='docker stop'
alias dstart='docker start'
alias dstopall='docker ps -a| sed "1 d" | awk '"'"'{print $1}'"'"' | xargs docker stop'
alias dstartall='docker ps -a| sed "1 d" | awk '"'"'{print $1}'"'"' | xargs docker start'

# Helpful aliases
alias mountvm='sudo mkdir -p /shares ; sudo mount -t vmhgfs .host:/ /shares'
alias shrink='rm -f ~/.xsession-errors* ; sudo apt-get autoremove ; sudo apt-get clean ; sudo vmware-toolbox-cmd disk shrink /'
alias upd='sudo apt-get update ; sudo apt-get upgrade'
alias upd-atom='wget https://atom.io/download/deb -O atom-amd64.deb ; sudo dpkg -i atom-amd64.deb ; sudo apt-get -y -f install ; rm -f atom-amd64.deb'
alias op-docker-compose='xdg-open https://github.com/docker/compose/releases'
alias cleanup='rm -rf ~/.local/share/Trash/* ; sudo rm -rf /tmp/* ; rm -rf ~/vm-tools ; history -c'

# Advanced aliases
dsh() {
  docker exec -it $1 bash
}

upd-docker-compose() {
  sudo curl -L https://github.com/docker/compose/releases/download/$1/docker-compose-`uname -s`-`uname -m` > ./docker-compose ; sudo cp ./docker-compose /usr/local/bin/docker-compose ; sudo chmod +x /usr/local/bin/docker-compose ; rm -f ./docker-compose
}

get-vm-tools() {

  # Fetch content from GitHub
  content=`curl -s https://api.github.com/repos/SogetiATC/vm-tools/releases/latest`
  url=`echo $content | jq -r ". | .tarball_url"`
  version=`echo $content | jq -r ". | .tag_name"`
  name=`echo $content | jq -r ". | .name"`
  changelog=`echo $content | jq -r ". | .body"`
  echo "########################################################################"
  echo "#  Installing VM Tools $version (codename $name)"
  echo "########################################################################"

  # Download scripts from GitHub
  mkdir -p /tmp/vmt
  cd /tmp/vmt
  file=vm-tools.tar.gz
  wget -nv $url -O $file

  # Untar and install scripts
  tar zxf $file
  infolder=`find . -type d -name post-install`
  outfolder=~/vm-tools
  rm -rf $outfolder
  mkdir -p $outfolder
  cp -rf $infolder/* $outfolder
  cd -

  # Cleanup temp files
  rm -rf /tmp/vmt

  # Install newest version of aliases and tools
  cd ~/vm-tools/SH
  ./update_essentials.sh
  ./install_bash.sh
  cd -

  #Â All done
  echo ""
  echo "########################################################################"
  echo "VM Tools updated to $version (codename $name)"
  echo "Changelog :"
  echo "$changelog"

}
